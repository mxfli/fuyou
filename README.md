蜉蝣 Shell 
----
「掘阅振羽，尽务而息」

## 版本发布

### v0.3.0 (最新)

- **交互式配置向导**: 新增 `setup.sh` 智能配置向导，一键完成应用部署配置
- **JAR类型自动识别**: 智能检测 Fat JAR 和 Thin JAR，自动选择最优启动方式
- **Spring Profile智能选择**: 自动检测配置文件，智能推荐和选择 Profile
- **JVM参数交互配置**: 友好的内存配置向导，适配不同环境需求
- **环境变量隔离**: 移除 export 使用，避免污染系统环境，支持多应用安全部署
- **配置文件覆盖保护**: 智能检测现有配置，提供覆盖确认机制

### v0.2.0
- **增强Spring Boot启动检查**: 基于日志关键字(`Started`)的智能启动状态检测，替代简单的进程检查
- **优化交互体验**: 智能区分单/多实例场景，提供更友好的操作引导
- **强化滚动重启安全性**: 新增熔断保护机制，启动失败时立即终止滚动重启防止服务中断
- **自动故障检测**: 检测应用启动过程中的异常和自动关闭情况，及时清理无效PID文件

### v0.1.0
- 新增通用 Java 应用启动脚本 `startup.sh`，支持多实例部署、滚动重启及生命周期管理。

## 主要功能

### CSV 文件分割工具

一个高效的 CSV 文件分割脚本，用于将大型 CSV 文件按指定行数分割成多个子文件：

#### 🎯 核心功能

- **智能分割**: 将大型 CSV 文件按 100 万行数据分割成多个子文件
- **标题行保护**: 自动保留 CSV 标题行，每个子文件都包含完整的表头
- **双模式支持**: 支持单文件分割和多文件批量处理
- **智能检测**: 自动检测文件是否需要分割，避免不必要的处理
- **顺序编号**: 输出文件按 `_N_00`, `_N_01` 格式顺序编号

#### 📋 使用方法

```bash
# 单文件模式 - 分割单个大文件
./csv_file_splitter.sh data_file

# 多文件模式 - 批量处理多个文件
./csv_file_splitter.sh data_file 00
```

#### 💡 特性

- **内存优化**: 使用流式处理，支持处理超大文件而不占用过多内存
- **临时文件管理**: 自动创建和清理临时文件，确保系统整洁
- **进度显示**: 实时显示处理进度和文件统计信息
- **错误处理**: 完善的错误检查和异常处理机制

### Spring Boot 应用启动管理器

一个智能的 Spring Boot 应用部署和管理工具，提供从配置到运行的完整解决方案：

#### 🎯 智能配置 (`setup.sh`)

- **交互式向导**: 友好的配置引导，一步步完成应用部署设置
- **JAR类型识别**: 自动检测 Fat JAR 和 Thin JAR，选择最优启动方式
- **应用信息解析**: 智能解析 JAR 文件名，自动获取应用名称和版本
- **Spring Profile智能选择**: 检测配置文件，推荐合适的 Profile
- **JVM参数配置**: 交互式内存配置，适配不同环境需求
- **环境变量隔离**: 不使用 export，避免污染系统环境

#### 🚀 启动管理 (`startup.sh`)
- **Spring Boot启动检查**: 通过检查日志中的`Started.*in.*seconds`关键字确认应用真正启动成功
- **智能故障检测**: 自动识别启动过程中的异常、应用自动关闭等情况
- **超时保护**: 60秒启动超时机制，避免无限等待
- **PID自动清理**: 检测到启动失败时自动清理无效的PID文件

#### 🏢 多实例管理
- **灵活配置**: 通过 `servers.properties` 配置文件支持多实例部署
- **单实例智能识别**: 无配置文件时自动切换为单实例模式
- **实例隔离**: 每个实例独立的运行目录、日志目录和配置

#### 🔄 生命周期控制
- **标准命令**: 提供 `start`, `stop`, `restart`, `status` 等标准操作
- **优雅停止**: 多层次停止策略 (Actuator → SIGTERM → SIGINT → SIGKILL)
- **滚动重启**: 带熔断保护的安全滚动重启，确保业务连续性
- **状态监控**: 实时检查单个或所有实例的运行状态

#### 🛡️ 安全保护
- **熔断机制**: 滚动重启时，任一实例启动失败立即终止后续操作
- **业务连续性**: 保护正在运行的实例不受失败实例影响
- **优雅停止**: 多层次停止策略，最大化保护数据完整性和事务一致性
- **可配置超时**: 支持自定义各阶段等待时间，适应不同应用特性
- **详细诊断**: 失败时提供完整的故障信息和恢复建议

#### 💻 用户体验
- **交互式界面**: 无参数运行时提供友好的菜单操作
- **智能提示**: 根据环境自动调整交互流程
- **多种输入**: 支持命令名称、数字选择、实例名等多种输入方式

## 🚀 快速开始

### 1. 准备工作

```bash
# 将 Spring Boot JAR 文件放到应用根目录
your-app/
├── your-app-1.0.0.jar              # 您的应用JAR
└── spring-boot-shell-manager/      # 管理器目录
    ├── setup.sh                    # 配置向导
    └── startup.sh                  # 启动脚本
```

### 2. 运行配置向导

```bash
cd spring-boot-shell-manager
./setup.sh
```

### 3. 启动应用

```bash
# 启动应用
./startup.sh start

# 查看状态
./startup.sh status

# 停止应用
./startup.sh stop
```

## 📚 文档

- **[使用手册](spring-boot-shell-manager/MANUAL.md)** - 详细的使用说明和参考文档
- **[README](spring-boot-shell-manager/README.md)** - 功能介绍和配置说明
- **[示例项目](spring-boot-shell-manager/examples/)** - 完整的使用示例